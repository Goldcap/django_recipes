{% extends "recipes/base.html" %}
{% load fractions %}

{% block content %}
        <div id="recipe-links">
          <a href="/admin/recipes/recipe/{{ object.id }}">edit</a>
        </div>

	<div id="recipe-preamble">
		<h2>{{ object.title }}</h2>
		<p class="recipe-summary">{{ object.summary }}</p>
	</div>

	<!-- Ingredient/direction style #1 -->
       	{% for direction in object.directions.all %}
		<div class="step">
				<div class="ingredients-left">
					<ul class="ingredients">
						{% for ingredient in direction.ingredients.all %}
						<li>{{ingredient.amount|text_fraction}}{% if ingredient.amountMax %}-{{ingredient.amountMax|text_fraction}}{% endif %} {{ingredient.unit.plural_abbrev}} {% if ingredient.prep_method %} {{ingredient.prep_method}} {% endif %}{{ingredient.food.name}}{% if ingredient.instruction %}, {{ingredient.instruction}}{% endif %}</li>
						{% endfor %}
					</ul>
				</div>
				<div class="directions">
					{{direction.text}}
				</div>
		</div>	<!-- step -->
	{% endfor %}

    <p><i>Extra Instructions:</i><br />
 	   {{ object.instructions }}
    </p>

	<p><i>Prep time: {{ object.prep_time }}</i></p>
    {% if object.sources %}

    <p><i>Sources:</i>
            <ul>
            {% for source in object.sources.all %}
                <li>{{ source }}</li>
            {% endfor %}
            </ul>
    {% endif %}

    {% if object.category %}
    <p><i>Category:</i> <a href="/recipes/category/{{ object.category.id }}">{{ object.category }}</a></p>
    {% endif %}

    {% if object.photo_set %}
        <h3>Photos:</h3>
            <ul>
            {% for photo in object.photo_set.all %}
                <li><a href="/media/{{ photo.image }}"><img width="300" src="/media/{{ photo.image }}"></img></a></li>
            {% endfor %}
            </ul>
    {% endif %}
{% endblock %}
